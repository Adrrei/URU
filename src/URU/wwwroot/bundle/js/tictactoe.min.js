"use strict";function generatePlayzone(){let n=document.getElementById("player-id").value;if(n.length<2){document.getElementById("name-error").classList.remove("invisible");return}connection.invoke("AddPlayer",n);document.getElementById("player").textContent=n;document.getElementById("name-container").outerHTML="";document.getElementById("play-container").classList.remove("invisible");document.getElementById("game-id").focus();drawBoard()}function joinRoom(){let n=document.getElementById("game-id").value;connection.invoke("InitializeGroup",previousRoom,n);connection.invoke("InitializeBoard",n);connection.invoke("UpdateScores",n);connection.invoke("UpdateScores",previousRoom);document.getElementById("room").textContent=n;previousRoom=n}function drawBoard(){var i,n;let t=document.getElementById("board");while(t.hasChildNodes())t.removeChild(t.firstChild);let r=1;for(let u=0;u<3;u++){i=document.createElement("tr");i.classList.add("row");for(let t=0;t<3;t++)n=document.createElement("td"),n.innerHTML=r,n.id=r++,n.addEventListener("click",function(){let n=document.getElementById("room").textContent;connection.invoke("UpdateBoard",n,u,t);connection.invoke("CheckWinner",n)}),i.appendChild(n);t.appendChild(i)}}async function start(){try{await connection.start()}catch(n){setTimeout(()=>start(),1e4)}}document.addEventListener("DOMContentLoaded",function(){document.getElementById("player-id").value="";document.getElementById("game-id").value="";let n=document.getElementById("ready-button");n.addEventListener("click",generatePlayzone);let t=document.getElementById("player-id");t.addEventListener("keyup",function(i){if(t.value.length<2){n.classList.remove("btn-ready");return}n.classList.add("btn-ready");i.key==="Enter"&&generatePlayzone()})});let previousRoom="";"use strict";const connection=(new signalR.HubConnectionBuilder).withUrl("/gameHub").configureLogging(signalR.LogLevel.None).build();connection.start().catch(function(n){return console.error(n.toString())});connection.on("ReceiveWinner",function(n,t){n=JSON.parse(n);n.Item1!==""&&(document.getElementById(n.Item1+"-score").textContent=" ("+n.Item2+")");document.getElementById("results").classList.toggle("invisible");document.getElementById("results").textContent=t;setTimeout(function(){document.getElementById("results").classList.toggle("invisible")},3e3);drawBoard()});connection.on("ReceiveScores",function(n){for(let i=0;i<n.length;i++){var t=document.getElementById(n[i].Item1+"-score");t&&(t.textContent=" ("+n[i].Item2+")")}});connection.on("ReceiveBoard",function(n,t){t=JSON.parse(t);n=JSON.parse(n);let i=document.getElementById("board").children;for(let t=0;t<3;t++){let r=i[t].getElementsByTagName("td");for(let i=0;i<r.length;i++)r[i].textContent=n[t][i]}for(let n=0;n<t.length;n++){let i=document.getElementById(t[n].Item1+"-tag");i&&i.id.includes(t[n].Item1)&&(i.textContent=t[n].Item2+" - ")}});connection.on("ReceiveTurn",function(n){var t=document.getElementById("players").getElementsByTagName("span"),i=!1;for(let r=0;r<t.length;r++)t[r].classList.remove("player-active"),!i&&t[r].textContent.includes(n)&&(t[r].classList.add("player-active"),i=!0)});connection.on("Activity",function(n){var f,r;let u=document.getElementsByClassName("information"),t=document.getElementById("players"),i=document.getElementById("spectators");if(t.innerHTML="",i.innerHTML="",document.getElementById("game-id").value===""){for(let n=0;n<u.length;n++)u[n].classList.add("invisible");return}for(let n=0;n<u.length;n++)u[n].classList.remove("invisible");f=0;for(r in n){let u=document.createElement("span");u.id=n[r]+"-tag";u.textContent="? - ";let e=document.createElement("span");e.id=n[r]+"-id";e.textContent=n[r];let o=document.createElement("span");o.id=n[r]+"-score";o.textContent=" (0)";let s=document.createElement("span");s.classList.add("newline");f++<2?(t.appendChild(u),t.appendChild(e),t.appendChild(o),t.appendChild(s)):(i.appendChild(u),i.appendChild(e),i.appendChild(o),i.appendChild(s))}});document.getElementById("game-id").addEventListener("input",function(){joinRoom()});