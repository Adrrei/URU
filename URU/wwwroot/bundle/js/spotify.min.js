function getIdDurationArtists(){let n=getItemFromStorage("Playtime"),t=getItemFromStorage("Artists");if(n&&t){document.getElementsByClassName("loading")[0].classList.remove("loading");document.getElementById("hours").textContent=n.hours;createTable(t.artists,"artists");return}fetch("/Spotify/GetIdDurationArtists").then(function(n){return n.json()}).then(function(n){document.getElementsByClassName("loading")[0].classList.remove("loading");let t=n.time;document.getElementById("hours").textContent=t;let i=n.artists;createTable(i,"artists");setItemInStorage("Playtime",{hours:t});setItemInStorage("Artists",{artists:i})})}function getGenres(){let n=getItemFromStorage("Genres");n&&createTable(n.genres,"genres");fetch("/Spotify/GetGenres").then(function(n){return n.json()}).then(function(n){let t=n.genres;createTable(t,"genres");setItemInStorage("Genres",{genres:t})})}function getFavorites(){let u=window.innerWidth,n,t;switch(!0){case u>880:n=245;t=245;break;case u>360:n=320;t=80;break;default:n=260;t=80}let r=document.getElementById("favorites");for(let u=0;u<4;u++){var i=new Image;i.onload=function(){r.src=this.src};i.src="/content/images/Spotify-"+n+"x"+t+".png";i.classList.add("invisible");let f=r.getElementsByClassName("column")[u];f.innerHTML="";f.appendChild(i)}fetch("/Spotify/GetFavorites").then(function(n){return n.json()}).then(function(i){let u=i.favorites,f=0;u.forEach(function(i){let u=document.createElement("iframe");u.src="https://open.spotify.com/embed/track/"+i;u.height=t;u.width=n;r.getElementsByClassName("column")[f++].getElementsByTagName("img")[0].replaceWith(u)})})}function createTable(n,t){let i=document.getElementById(t).getElementsByTagName("tbody")[0];i.innerHTML="";Object.keys(n).forEach(t=>{let u=n[t],r=i.insertRow(),f=r.insertCell(0);f.textContent=t;let e=r.insertCell(1);e.textContent=u.item1;r.appendChild(f);r.appendChild(e);r.setAttribute("data-uri",u.item2);r.addEventListener("click",function(){window.location.href=r.dataset.uri});i.appendChild(r)})}function handleLocalStorage(){let t=getItemFromStorage("Reset");if(t){var i=new Date,r=new Date(t.date);if(i>r)localStorage.clear();else return}let n=new Date;n.setHours(n.getHours()+3);setItemInStorage("Reset",{date:n})}function setItemInStorage(n,t){localStorage.setItem(n,JSON.stringify(t))}function getItemFromStorage(n){var t=localStorage.getItem(n);return t?JSON.parse(t):null}document.addEventListener("DOMContentLoaded",function(){getGenres();getFavorites();getIdDurationArtists();let i=document.getElementById("reset-favorites");i.addEventListener("click",function(){getFavorites()});let r=document.getElementById("toggle-artists"),u=document.getElementById("toggle-genres"),n=document.getElementById("artists"),t=document.getElementById("genres");r.addEventListener("click",function(){n.classList.remove("hidden");t.classList.add("hidden")});u.addEventListener("click",function(){n.classList.add("hidden");t.classList.remove("hidden")});handleLocalStorage()});