function getIdDurationArtists(){let n=getItemFromStorage("Playtime"),t=getItemFromStorage("Artists");if(n&&t){document.getElementsByClassName("loading")[0].classList.remove("loading");document.getElementById("hours").textContent=n.hours;createTable(t.artists,"artists");return}fetch("/Spotify/GetIdDurationArtists").then(function(n){return n.json()}).then(function(n){document.getElementsByClassName("loading")[0].classList.remove("loading");let t=n.time;document.getElementById("hours").textContent=t;let i=n.artists;createTable(i,"artists");setItemInStorage("Playtime",{hours:t});setItemInStorage("Artists",{artists:i})})}function getGenres(){let n=getItemFromStorage("Genres");if(n){createTable(n.genres,"genres");return}fetch("/Spotify/GetGenres").then(function(n){return n.json()}).then(function(n){let t=n.genres;createTable(t,"genres");setItemInStorage("Genres",{genres:t})})}function getFavorites(){let n=getItemFromStorage("Favorites");if(n){displayFavorites(n.favorites);return}fetch("/Spotify/GetFavorites").then(function(n){return n.json()}).then(function(n){let t=n.favorites;displayFavorites(t);setItemInStorage("Favorites",{favorites:t})})}function displayFavorites(n){let r=[];for(let t=0;t<4;t++){let t=randomNumber(n.length);while(r.includes(t))t=randomNumber(n.length);r.push(t)}let u=window.innerWidth,t,i;switch(!0){case u>880:t=245;i=245;break;case u>360:t=320;i=80;break;default:t=260;i=80}for(let u=0;u<4;u++){let f=document.createElement("iframe");f.src="https://open.spotify.com/embed/track/"+n[r[u]];f.height=i;f.width=t;let e=document.getElementById("favorites").getElementsByClassName("column")[u];e.innerHTML="";e.appendChild(f)}}function randomNumber(n){return Math.floor(Math.random()*n)}function createTable(n,t){let i=document.getElementById(t).getElementsByTagName("tbody")[0];i.innerHTML="";Object.keys(n).forEach(t=>{let u=n[t],r=i.insertRow(),f=r.insertCell(0);f.textContent=t;let e=r.insertCell(1);e.textContent=u.item1;r.appendChild(f);r.appendChild(e);r.setAttribute("data-uri",u.item2);r.addEventListener("click",function(){window.location.href=r.dataset.uri});i.appendChild(r)})}function handleLocalStorage(){let t=getItemFromStorage("Reset");if(t){var i=new Date,r=new Date(t.date);if(i>r)localStorage.clear();else return}let n=new Date;n.setHours(n.getHours()+3);setItemInStorage("Reset",{date:n})}function setItemInStorage(n,t){localStorage.setItem(n,JSON.stringify(t))}function getItemFromStorage(n){var t=localStorage.getItem(n);return t?JSON.parse(t):null}document.addEventListener("DOMContentLoaded",function(){getGenres();getFavorites();getIdDurationArtists();let u=document.getElementById("reset-favorites");u.addEventListener("click",function(){getFavorites()});let n=document.getElementById("toggle-artists"),t=document.getElementById("toggle-genres"),i=document.getElementById("artists"),r=document.getElementById("genres");n.addEventListener("click",function(){i.classList.remove("hidden");r.classList.add("hidden");n.classList.add("checked");t.classList.remove("checked")});t.addEventListener("click",function(){i.classList.add("hidden");r.classList.remove("hidden");n.classList.remove("checked");t.classList.add("checked")});handleLocalStorage()});